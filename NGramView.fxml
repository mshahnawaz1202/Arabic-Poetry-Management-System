<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.text.Font?>

<BorderPane xmlns="http://javafx.com/javafx/21" 
            xmlns:fx="http://javafx.com/fxml/1"
            fx:controller="pl.controller.NGramController"
            prefHeight="800.0" prefWidth="1400.0"
            style="-fx-background-color: #f3eadb;">

    <!-- TOP HEADER -->
    <top>
        <VBox style="-fx-background-color: linear-gradient(to right, #e6d5b8, #d9c3a3);
                     -fx-effect: dropshadow(gaussian, rgba(80,60,40,0.3), 15, 0, 0, 2);">
            <padding><Insets top="30" right="40" bottom="30" left="40"/></padding>

            <Label text="ðŸ” N-Gram Similarity Analysis"
                   textFill="#4b2e19"
                   style="-fx-font-weight: bold;">
                <font><Font size="28"/></font>
            </Label>

            <Label text="Find similar verses using N-gram analysis and word matching"
                   textFill="#6b4b31">
                <font><Font size="14"/></font>
                <VBox.margin><Insets top="5"/></VBox.margin>
            </Label>
        </VBox>
    </top>

    <center>
        <VBox spacing="20" style="-fx-background-color: #f3eadb;">
            <padding><Insets top="30" right="30" bottom="30" left="30"/></padding>

            <!-- PARAMETERS PANEL -->
            <HBox spacing="20" alignment="CENTER_LEFT"
                  style="-fx-background-color: #fcf8f3;
                         -fx-border-color: #ccb89d;
                         -fx-border-width: 2;
                         -fx-border-radius: 8;
                         -fx-background-radius: 8;
                         -fx-padding: 20;">

                <VBox spacing="8">
                    <Label text="N-Gram Size (N):"
                           style="-fx-font-size: 13px; -fx-text-fill: #4b2e19; -fx-font-weight: bold;"/>
                    <Spinner fx:id="nValueSpinner" 
                             editable="true"
                             prefWidth="100"
                             styleClass="custom-spinner"/>
                </VBox>

                <VBox spacing="8">
                    <Label text="Min Similarity (%):"
                           style="-fx-font-size: 13px; -fx-text-fill: #4b2e19; -fx-font-weight: bold;"/>
                    <Spinner fx:id="minSimilaritySpinner"
                             editable="true"
                             prefWidth="100"
                             styleClass="custom-spinner"/>
                </VBox>

                <Region HBox.hgrow="ALWAYS"/>

                <Button fx:id="findSimilarButton" text="Find Similar"
                        onAction="#handleFindSimilar"
                        prefWidth="140" prefHeight="40"
                        style="-fx-background-color: #a88965;
                               -fx-text-fill: white;
                               -fx-font-size: 14px;
                               -fx-font-weight: bold;
                               -fx-background-radius: 6;
                               -fx-cursor: hand;"/>

                <Button fx:id="clearButton" text="Clear"
                        onAction="#handleClear"
                        prefWidth="120" prefHeight="40"
                        style="-fx-background-color: #b14545;
                               -fx-text-fill: white;
                               -fx-font-size: 14px;
                               -fx-font-weight: bold;
                               -fx-background-radius: 6;
                               -fx-cursor: hand;"/>
            </HBox>

            <!-- INPUT VERSE PANEL -->
            <VBox spacing="10" VBox.vgrow="NEVER"
                  style="-fx-background-color: #fcf8f3;
                         -fx-border-color: #ccb89d;
                         -fx-border-width: 2;
                         -fx-border-radius: 8;
                         -fx-background-radius: 8;">
                <padding><Insets top="15" right="20" bottom="15" left="20"/></padding>

                <Label text="Enter Your Verse Text"
                       style="-fx-font-size: 14px;
                              -fx-text-fill: #4b2e19;
                              -fx-font-weight: bold;"/>

                <TextArea fx:id="inputVerseArea"
                          promptText="Type or paste the verse text you want to find similar verses for"
                          wrapText="true"
                          prefHeight="120"
                          style="-fx-background-color: white;
                                 -fx-border-color: #b89f7a;
                                 -fx-border-width: 1;
                                 -fx-border-radius: 4;
                                 -fx-background-radius: 4;
                                 -fx-padding: 10;
                                 -fx-font-size: 15px;"/>
            </VBox>

            <!-- RESULTS PANEL -->
            <VBox spacing="10" VBox.vgrow="ALWAYS"
                  style="-fx-background-color: #fcf8f3;
                         -fx-border-color: #ccb89d;
                         -fx-border-width: 2;
                         -fx-border-radius: 8;
                         -fx-background-radius: 8;">
                <padding><Insets top="15" right="20" bottom="15" left="20"/></padding>

                <Label text="Similar Verses Found"
                       style="-fx-font-size: 14px;
                              -fx-text-fill: #4b2e19;
                              -fx-font-weight: bold;"/>

                <TableView fx:id="resultsTable" VBox.vgrow="ALWAYS"
                           style="-fx-background-color: white;
                                  -fx-border-color: #b89f7a;
                                  -fx-border-radius: 4;
                                  -fx-background-radius: 4;">
                    <columns>
                        <TableColumn fx:id="verseIdColumn" text="Verse ID" 
                                     prefWidth="80"
                                     style="-fx-alignment: CENTER;"/>
                        <TableColumn fx:id="similarityColumn" text="Similarity %" 
                                     prefWidth="100"
                                     style="-fx-alignment: CENTER;"/>
                        <TableColumn fx:id="verseTextColumn" text="Verse Text" 
                                     prefWidth="450"/>
                        <TableColumn fx:id="targetGramsColumn" text="N-Grams (Target)" 
                                     prefWidth="140"
                                     style="-fx-alignment: CENTER;"/>
                        <TableColumn fx:id="verseGramsColumn" text="N-Grams (Verse)" 
                                     prefWidth="140"
                                     style="-fx-alignment: CENTER;"/>
                        <TableColumn fx:id="intersectionColumn" text="Intersection" 
                                     prefWidth="100"
                                     style="-fx-alignment: CENTER;"/>
                        <TableColumn fx:id="commonWordsColumn" text="Common Words" 
                                     prefWidth="120"
                                     style="-fx-alignment: CENTER;"/>
                    </columns>
                </TableView>
            </VBox>
        </VBox>
    </center>

    <!-- BOTTOM STATUS BAR -->
    <bottom>
        <HBox alignment="CENTER_LEFT"
              style="-fx-background-color: #e6d5b8;
                     -fx-border-color: #ccb89d;
                     -fx-border-width: 1 0 0 0;
                     -fx-padding: 12 20;">
            <Label fx:id="statusLabel" 
                   text="Ready. Enter verse text to find similar verses."
                   style="-fx-text-fill: #4b2e19;
                          -fx-font-size: 13px;"/>
        </HBox>
    </bottom>

</BorderPane>